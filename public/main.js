"use strict";var app=angular.module("myApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,n,t){t.html5Mode({enabled:!0,requireBase:!1}),n.otherwise("/")}]),app.controller("peopleController",["$scope","peopleFactory",function(e,n){function t(e){var n=0;for(var t in e)e.hasOwnProperty(t)&&++n;return n}function o(n){Array.isArray(n)?e.currentResults=n:e.currentResults=[n]}e.max=0,e.people=n.getAllPeople().then(function(n){e.max=parseInt(t(n))}),e.currentPerson={},e.currentResults={},e.getPersons=function(n){n.id?e.getSinglePerson(e.currentPerson):e.getAllPeople()},e.getAllPeople=function(){n.getAllPeople().then(function(n){e.currentResults=n}).catch()},e.getSinglePerson=function(t){n.getSinglePerson(t).then(function(n){n.id||(n={id:"No Record Found",name:"No Record Found",favoriteCity:"No Record Found"}),e.currentResults=[n]}).catch(),e.currentPerson={}},e.postPerson=function(t){n.postPerson(t).then(o).catch(),e.currentPerson={}},e.updatePerson=function(t){n.updatePerson(t).then(function(n){e.currentResults=[t]}).catch(),e.currentPerson={}},e.deletePerson=function(t){n.deletePerson(t).then(function(){e.currentResults=[{id:"RECORD DELETED",name:"RECORD DELETED",favoriteCity:"RECORD DELETED"}]}).catch(),e.currentPerson={}}}]),app.factory("peopleFactory",["$http",function(e){function n(e){return console.log(e.data),e.data}return{getAllPeople:function(){return e.get("/api/people").then(n).catch()},getSinglePerson:function(t){return console.log("sending",t),e.get("/api/people/"+t.id).then(n).catch()},postPerson:function(t){return console.log("sending",t),e.post("/api/people",t).then(n).catch()},updatePerson:function(t){return console.log("sending",t),e.put("/api/people/"+t.id,t).then(n).catch()},deletePerson:function(t){return console.log("sending",t),e.delete("/api/people/"+t.id).then(n).catch()}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhcHAuanMiLCJwZW9wbGUvcGVvcGxlLmNvbnRyb2xsZXIuanMiLCJwZW9wbGUvcGVvcGxlLmZhY3RvcnkuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwicmVxdWlyZUJhc2UiLCJvdGhlcndpc2UiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwicGVvcGxlRmFjdG9yeSIsImNvdW50UHJvcGVydGllcyIsIm9iaiIsImNvdW50IiwicHJvcCIsImhhc093blByb3BlcnR5Iiwic2F2ZVJlc3VsdHMiLCJyZXN1bHRzIiwiQXJyYXkiLCJpc0FycmF5IiwiY3VycmVudFJlc3VsdHMiLCJtYXgiLCJwZW9wbGUiLCJnZXRBbGxQZW9wbGUiLCJ0aGVuIiwicGFyc2VJbnQiLCJjdXJyZW50UGVyc29uIiwiZ2V0UGVyc29ucyIsInBlcnNvbkluZm8iLCJpZCIsImdldFNpbmdsZVBlcnNvbiIsInJlc3BvbnNlIiwiY2F0Y2giLCJyZXN1bHQiLCJuYW1lIiwiZmF2b3JpdGVDaXR5IiwicG9zdFBlcnNvbiIsInVwZGF0ZVBlcnNvbiIsImRlbGV0ZVBlcnNvbiIsImZhY3RvcnkiLCIkaHR0cCIsImdldERhdGEiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiXSwibWFwcGluZ3MiOiJBQUFBLFlDQUEsSUFBQUEsS0FBQUMsUUFBQUMsT0FBQSxTQUFBLGFBRUFGLEtBQUFHLFFBQUEsaUJBQUEscUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUEsRUFBQUMsV0FDQUMsU0FBQSxFQUNBQyxhQUFBLElBRUFKLEVBQUFLLFVBQUEsUUNQQVYsSUFBQVcsV0FBQSxvQkFBQSxTQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEdBRUEsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBLENBRUEsS0FBQSxHQUFBQyxLQUFBRixHQUNBQSxFQUFBRyxlQUFBRCxNQUNBRCxDQUdBLE9BQUFBLEdBR0EsUUFBQUcsR0FBQUMsR0FFQUMsTUFBQUMsUUFBQUYsR0FHQVIsRUFBQVcsZUFBQUgsRUFGQVIsRUFBQVcsZ0JBQUFILEdBTUFSLEVBQUFZLElBQUEsRUFFQVosRUFBQWEsT0FBQVosRUFBQWEsZUFBQUMsS0FBQSxTQUFBRixHQUNBYixFQUFBWSxJQUFBSSxTQUFBZCxFQUFBVyxNQUlBYixFQUFBaUIsaUJBRUFqQixFQUFBVyxrQkFFQVgsRUFBQWtCLFdBQUEsU0FBQUMsR0FDQUEsRUFBQUMsR0FDQXBCLEVBQUFxQixnQkFBQXJCLEVBQUFpQixlQUVBakIsRUFBQWMsZ0JBSUFkLEVBQUFjLGFBQUEsV0FDQWIsRUFBQWEsZUFDQUMsS0FBQSxTQUFBTyxHQUNBdEIsRUFBQVcsZUFBQVcsSUFFQUMsU0FHQXZCLEVBQUFxQixnQkFBQSxTQUFBRixHQUNBbEIsRUFBQW9CLGdCQUFBRixHQUNBSixLQUFBLFNBQUFTLEdBQ0FBLEVBQUFKLEtBQ0FJLEdBQ0FKLEdBQUEsa0JBQ0FLLEtBQUEsa0JBQ0FDLGFBQUEsb0JBR0ExQixFQUFBVyxnQkFBQWEsS0FFQUQsUUFDQXZCLEVBQUFpQixrQkFHQWpCLEVBQUEyQixXQUFBLFNBQUFSLEdBQ0FsQixFQUFBMEIsV0FBQVIsR0FDQUosS0FBQVIsR0FDQWdCLFFBQ0F2QixFQUFBaUIsa0JBR0FqQixFQUFBNEIsYUFBQSxTQUFBVCxHQUNBbEIsRUFBQTJCLGFBQUFULEdBQ0FKLEtBQUEsU0FBQVAsR0FDQVIsRUFBQVcsZ0JBQUFRLEtBRUFJLFFBQ0F2QixFQUFBaUIsa0JBR0FqQixFQUFBNkIsYUFBQSxTQUFBVixHQUVBbEIsRUFBQTRCLGFBQUFWLEdBQ0FKLEtBQUEsV0FDQWYsRUFBQVcsaUJBQ0FTLEdBQUEsaUJBQ0FLLEtBQUEsaUJBQ0FDLGFBQUEscUJBR0FILFFBQ0F2QixFQUFBaUIscUJDNUZBN0IsSUFBQTBDLFFBQUEsaUJBQUEsUUFBQSxTQUFBQyxHQUVBLFFBQUFDLEdBQUFWLEdBRUEsTUFEQVcsU0FBQUMsSUFBQVosRUFBQWEsTUFDQWIsRUFBQWEsS0FHQSxPQUNBckIsYUFBQSxXQUVBLE1BQUFpQixHQUFBSyxJQUFBLGVBQ0FyQixLQUFBaUIsR0FDQVQsU0FFQUYsZ0JBQUEsU0FBQUYsR0FFQSxNQURBYyxTQUFBQyxJQUFBLFVBQUFmLEdBQ0FZLEVBQUFLLElBQUEsZUFBQWpCLEVBQUFDLElBQ0FMLEtBQUFpQixHQUNBVCxTQUVBSSxXQUFBLFNBQUFSLEdBRUEsTUFEQWMsU0FBQUMsSUFBQSxVQUFBZixHQUNBWSxFQUFBTSxLQUFBLGNBQUFsQixHQUNBSixLQUFBaUIsR0FDQVQsU0FFQUssYUFBQSxTQUFBVCxHQUVBLE1BREFjLFNBQUFDLElBQUEsVUFBQWYsR0FDQVksRUFBQU8sSUFBQSxlQUFBbkIsRUFBQUMsR0FBQUQsR0FDQUosS0FBQWlCLEdBQ0FULFNBRUFNLGFBQUEsU0FBQVYsR0FFQSxNQURBYyxTQUFBQyxJQUFBLFVBQUFmLEdBQ0FZLEVBQUFRLE9BQUEsZUFBQXBCLEVBQUFDLElBQ0FMLEtBQUFpQixHQUNBVCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgWyd1aS5yb3V0ZXInXSk7XG5cbmFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICByZXF1aXJlQmFzZTogZmFsc2VcbiAgICB9KTtcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbn1dKTtcbmFwcC5jb250cm9sbGVyKCdwZW9wbGVDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgcGVvcGxlRmFjdG9yeSkge1xuXG4gICAgZnVuY3Rpb24gY291bnRQcm9wZXJ0aWVzKG9iaikge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSArK2NvdW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVSZXN1bHRzKHJlc3VsdHMpIHtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0cykpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFtyZXN1bHRzXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubWF4ID0gMDtcblxuICAgICRzY29wZS5wZW9wbGUgPSBwZW9wbGVGYWN0b3J5LmdldEFsbFBlb3BsZSgpLnRoZW4oZnVuY3Rpb24gKHBlb3BsZSkge1xuICAgICAgICAkc2NvcGUubWF4ID0gcGFyc2VJbnQoY291bnRQcm9wZXJ0aWVzKHBlb3BsZSkpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcblxuICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHt9O1xuXG4gICAgJHNjb3BlLmdldFBlcnNvbnMgPSBmdW5jdGlvbiAocGVyc29uSW5mbykge1xuICAgICAgICBpZiAoISFwZXJzb25JbmZvLmlkKSB7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0U2luZ2xlUGVyc29uKCRzY29wZS5jdXJyZW50UGVyc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5nZXRBbGxQZW9wbGUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuZ2V0QWxsUGVvcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBwZW9wbGVGYWN0b3J5LmdldEFsbFBlb3BsZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFJlc3VsdHMgPSByZXNwb25zZTtcbiAgICAgICAgfSkuY2F0Y2goKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldFNpbmdsZVBlcnNvbiA9IGZ1bmN0aW9uIChwZXJzb25JbmZvKSB7XG4gICAgICAgIHBlb3BsZUZhY3RvcnkuZ2V0U2luZ2xlUGVyc29uKHBlcnNvbkluZm8pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuaWQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBcIk5vIFJlY29yZCBGb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIk5vIFJlY29yZCBGb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICBmYXZvcml0ZUNpdHk6IFwiTm8gUmVjb3JkIEZvdW5kXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXN1bHRzID0gW3Jlc3VsdF07XG4gICAgICAgIH0pLmNhdGNoKCk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS5wb3N0UGVyc29uID0gZnVuY3Rpb24gKHBlcnNvbkluZm8pIHtcbiAgICAgICAgcGVvcGxlRmFjdG9yeS5wb3N0UGVyc29uKHBlcnNvbkluZm8pLnRoZW4oc2F2ZVJlc3VsdHMpLmNhdGNoKCk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS51cGRhdGVQZXJzb24gPSBmdW5jdGlvbiAocGVyc29uSW5mbykge1xuICAgICAgICBwZW9wbGVGYWN0b3J5LnVwZGF0ZVBlcnNvbihwZXJzb25JbmZvKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFJlc3VsdHMgPSBbcGVyc29uSW5mb107XG4gICAgICAgIH0pLmNhdGNoKCk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVQZXJzb24gPSBmdW5jdGlvbiAocGVyc29uSW5mbykge1xuXG4gICAgICAgIHBlb3BsZUZhY3RvcnkuZGVsZXRlUGVyc29uKHBlcnNvbkluZm8pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXN1bHRzID0gW3tcbiAgICAgICAgICAgICAgICBpZDogJ1JFQ09SRCBERUxFVEVEJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUkVDT1JEIERFTEVURUQnLFxuICAgICAgICAgICAgICAgIGZhdm9yaXRlQ2l0eTogJ1JFQ09SRCBERUxFVEVEJ1xuICAgICAgICAgICAgfV07XG4gICAgICAgIH0pLmNhdGNoKCk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcbn0pO1xuYXBwLmZhY3RvcnkoJ3Blb3BsZUZhY3RvcnknLCBmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgIGZ1bmN0aW9uIGdldERhdGEocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldEFsbFBlb3BsZTogZnVuY3Rpb24gZ2V0QWxsUGVvcGxlKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Blb3BsZScpLnRoZW4oZ2V0RGF0YSkuY2F0Y2goKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U2luZ2xlUGVyc29uOiBmdW5jdGlvbiBnZXRTaW5nbGVQZXJzb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcnLCBwZXJzb25JbmZvKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcGVvcGxlLycgKyBwZXJzb25JbmZvLmlkKS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc3RQZXJzb246IGZ1bmN0aW9uIHBvc3RQZXJzb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcnLCBwZXJzb25JbmZvKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Blb3BsZScsIHBlcnNvbkluZm8pLnRoZW4oZ2V0RGF0YSkuY2F0Y2goKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlUGVyc29uOiBmdW5jdGlvbiB1cGRhdGVQZXJzb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcnLCBwZXJzb25JbmZvKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJy9hcGkvcGVvcGxlLycgKyBwZXJzb25JbmZvLmlkLCBwZXJzb25JbmZvKS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVBlcnNvbjogZnVuY3Rpb24gZGVsZXRlUGVyc29uKHBlcnNvbkluZm8pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZW5kaW5nJywgcGVyc29uSW5mbyk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3Blb3BsZS8nICsgcGVyc29uSW5mby5pZCkudGhlbihnZXREYXRhKS5jYXRjaCgpO1xuICAgICAgICB9XG4gICAgfTtcbn0pOyIsImxldCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ3VpLnJvdXRlciddKTtcblxuYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgfSk7XG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ3Blb3BsZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIHBlb3BsZUZhY3RvcnkpIHtcblxuICAgIGZ1bmN0aW9uIGNvdW50UHJvcGVydGllcyhvYmopIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgICAgICAgICArK2NvdW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVSZXN1bHRzKHJlc3VsdHMpIHtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0cykpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFtyZXN1bHRzXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5tYXggPSAwO1xuXG4gICAgJHNjb3BlLnBlb3BsZSA9IHBlb3BsZUZhY3RvcnkuZ2V0QWxsUGVvcGxlKCkudGhlbihmdW5jdGlvbihwZW9wbGUpIHtcbiAgICAgICAgJHNjb3BlLm1heCA9IHBhcnNlSW50KGNvdW50UHJvcGVydGllcyhwZW9wbGUpKTtcbiAgICB9KTtcblxuXG4gICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcblxuICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHt9O1xuXG4gICAgJHNjb3BlLmdldFBlcnNvbnMgPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgIGlmICghIXBlcnNvbkluZm8uaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5nZXRTaW5nbGVQZXJzb24oJHNjb3BlLmN1cnJlbnRQZXJzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmdldEFsbFBlb3BsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldEFsbFBlb3BsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwZW9wbGVGYWN0b3J5LmdldEFsbFBlb3BsZSgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgpO1xuICAgIH1cblxuICAgICRzY29wZS5nZXRTaW5nbGVQZXJzb24gPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgIHBlb3BsZUZhY3RvcnkuZ2V0U2luZ2xlUGVyc29uKHBlcnNvbkluZm8pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJObyBSZWNvcmQgRm91bmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTm8gUmVjb3JkIEZvdW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXZvcml0ZUNpdHk6IFwiTm8gUmVjb3JkIEZvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFJlc3VsdHMgPSBbcmVzdWx0XTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcbiAgICB9XG5cbiAgICAkc2NvcGUucG9zdFBlcnNvbiA9IGZ1bmN0aW9uKHBlcnNvbkluZm8pIHtcbiAgICAgICAgcGVvcGxlRmFjdG9yeS5wb3N0UGVyc29uKHBlcnNvbkluZm8pXG4gICAgICAgICAgICAudGhlbihzYXZlUmVzdWx0cylcbiAgICAgICAgICAgIC5jYXRjaCgpO1xuICAgICAgICAkc2NvcGUuY3VycmVudFBlcnNvbiA9IHt9O1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVQZXJzb24gPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgIHBlb3BsZUZhY3RvcnkudXBkYXRlUGVyc29uKHBlcnNvbkluZm8pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXN1bHRzID0gW3BlcnNvbkluZm9dO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgpO1xuICAgICAgICAkc2NvcGUuY3VycmVudFBlcnNvbiA9IHt9O1xuICAgIH1cblxuICAgICRzY29wZS5kZWxldGVQZXJzb24gPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG5cbiAgICAgICAgcGVvcGxlRmFjdG9yeS5kZWxldGVQZXJzb24ocGVyc29uSW5mbylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnUkVDT1JEIERFTEVURUQnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnUkVDT1JEIERFTEVURUQnLFxuICAgICAgICAgICAgICAgICAgICBmYXZvcml0ZUNpdHk6ICdSRUNPUkQgREVMRVRFRCdcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfVxufSkiLCJhcHAuZmFjdG9yeSgncGVvcGxlRmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpXG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldEFsbFBlb3BsZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcGVvcGxlJylcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpbmdsZVBlcnNvbjogZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcnLCBwZXJzb25JbmZvKVxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wZW9wbGUvJyArIHBlcnNvbkluZm8uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9LFxuICAgICAgICBwb3N0UGVyc29uOiBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2VuZGluZycsIHBlcnNvbkluZm8pXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wZW9wbGUnLCBwZXJzb25JbmZvKVxuICAgICAgICAgICAgICAgIC50aGVuKGdldERhdGEpXG4gICAgICAgICAgICAgICAgLmNhdGNoKClcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlUGVyc29uOiBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2VuZGluZycsIHBlcnNvbkluZm8pXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Blb3BsZS8nICsgcGVyc29uSW5mby5pZCwgcGVyc29uSW5mbylcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVBlcnNvbjogZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRpbmcnLCBwZXJzb25JbmZvKVxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9wZW9wbGUvJyArIHBlcnNvbkluZm8uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9XG4gICAgfVxufSkiXX0=
