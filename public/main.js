"use strict";var app=angular.module("myApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,n,t){t.html5Mode({enabled:!0,requireBase:!1}),n.otherwise("/")}]),app.controller("peopleController",["$scope","peopleFactory",function(e,n){function t(e){var n=0;for(var t in e)e.hasOwnProperty(t)&&++n;return n}function o(n){Array.isArray(n)?e.currentResults=204===n?[{id:"RECORD DELETED",name:"RECORD DELETED",favoriteCity:"RECORD DELETED"}]:n:e.currentResults=[n]}e.max=0,e.people=n.getAllPeople().then(function(n){e.max=parseInt(t(n)),console.log(e.max)}),e.currentPerson={},e.currentResults={},e.getPersons=function(n){n.id?e.getSinglePerson(e.currentPerson):e.getAllPeople()},e.getAllPeople=function(){console.log("Get all people"),n.getAllPeople().then(function(n){e.currentResults=n}).catch()},e.getSinglePerson=function(t){console.log("Get single Person",t),n.getSinglePerson(t).then(o).catch(),console.log("results",e.currentResults),e.currentPerson={}},e.postPerson=function(t){console.log("post one person",t),n.postPerson(t).then(o).catch(),console.log("results",e.currentResults),e.currentPerson={}},e.updatePerson=function(t){console.log("update one person",t),n.updatePerson(t).then(o).catch(),console.log("results",e.currentResults),e.currentPerson={}},e.deletePerson=function(t){console.log("delete one person",t),n.deletePerson(t.id).then(o).catch(),console.log("results",e.currentResults),e.currentPerson={}}}]),app.factory("peopleFactory",["$http",function(e){function n(e){return console.log("response",e),e.data}return{getAllPeople:function(){return e.get("/api/people").then(n).catch()},getSinglePerson:function(t){return e.get("/api/people/"+t.id).then(n).catch()},postPerson:function(t){return e.post("/api/people",t).then(n).catch()},updatePerson:function(t){return e.put("/api/people/"+t.id,t).then(n).catch()},deletePerson:function(t){return e.delete("/api/people/"+t.id).then(n).catch()}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhcHAuanMiLCJwZW9wbGUvcGVvcGxlLmNvbnRyb2xsZXIuanMiLCJwZW9wbGUvcGVvcGxlLmZhY3RvcnkuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJlbmFibGVkIiwicmVxdWlyZUJhc2UiLCJvdGhlcndpc2UiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwicGVvcGxlRmFjdG9yeSIsImNvdW50UHJvcGVydGllcyIsIm9iaiIsImNvdW50IiwicHJvcCIsImhhc093blByb3BlcnR5Iiwic2F2ZVJlc3VsdHMiLCJyZXN1bHRzIiwiQXJyYXkiLCJpc0FycmF5IiwiY3VycmVudFJlc3VsdHMiLCJpZCIsIm5hbWUiLCJmYXZvcml0ZUNpdHkiLCJtYXgiLCJwZW9wbGUiLCJnZXRBbGxQZW9wbGUiLCJ0aGVuIiwicGFyc2VJbnQiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudFBlcnNvbiIsImdldFBlcnNvbnMiLCJwZXJzb25JbmZvIiwiZ2V0U2luZ2xlUGVyc29uIiwicmVzcG9uc2UiLCJjYXRjaCIsInBvc3RQZXJzb24iLCJ1cGRhdGVQZXJzb24iLCJkZWxldGVQZXJzb24iLCJmYWN0b3J5IiwiJGh0dHAiLCJnZXREYXRhIiwiZGF0YSIsImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiXSwibWFwcGluZ3MiOiJBQUFBLFlDQUEsSUFBQUEsS0FBQUMsUUFBQUMsT0FBQSxTQUFBLGFBRUFGLEtBQUFHLFFBQUEsaUJBQUEscUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUEsRUFBQUMsV0FDQUMsU0FBQSxFQUNBQyxhQUFBLElBRUFKLEVBQUFLLFVBQUEsUUNQQVYsSUFBQVcsV0FBQSxvQkFBQSxTQUFBLGdCQUFBLFNBQUFDLEVBQUFDLEdBRUEsUUFBQUMsR0FBQUMsR0FDQSxHQUFBQyxHQUFBLENBRUEsS0FBQSxHQUFBQyxLQUFBRixHQUNBQSxFQUFBRyxlQUFBRCxNQUNBRCxDQUdBLE9BQUFBLEdBR0EsUUFBQUcsR0FBQUMsR0FFQUMsTUFBQUMsUUFBQUYsR0FHQVIsRUFBQVcsZUFEQSxNQUFBSCxJQUVBSSxHQUFBLGlCQUNBQyxLQUFBLGlCQUNBQyxhQUFBLG1CQUlBTixFQVRBUixFQUFBVyxnQkFBQUgsR0FhQVIsRUFBQWUsSUFBQSxFQUVBZixFQUFBZ0IsT0FBQWYsRUFBQWdCLGVBQUFDLEtBQUEsU0FBQUYsR0FDQWhCLEVBQUFlLElBQUFJLFNBQUFqQixFQUFBYyxJQUNBSSxRQUFBQyxJQUFBckIsRUFBQWUsT0FJQWYsRUFBQXNCLGlCQUVBdEIsRUFBQVcsa0JBRUFYLEVBQUF1QixXQUFBLFNBQUFDLEdBRUFBLEVBQUFaLEdBQ0FaLEVBQUF5QixnQkFBQXpCLEVBQUFzQixlQUVBdEIsRUFBQWlCLGdCQUlBakIsRUFBQWlCLGFBQUEsV0FDQUcsUUFBQUMsSUFBQSxrQkFDQXBCLEVBQUFnQixlQUNBQyxLQUFBLFNBQUFRLEdBQ0ExQixFQUFBVyxlQUFBZSxJQUVBQyxTQUdBM0IsRUFBQXlCLGdCQUFBLFNBQUFELEdBQ0FKLFFBQUFDLElBQUEsb0JBQUFHLEdBQ0F2QixFQUFBd0IsZ0JBQUFELEdBQ0FOLEtBQUFYLEdBQ0FvQixRQUNBUCxRQUFBQyxJQUFBLFVBQUFyQixFQUFBVyxnQkFDQVgsRUFBQXNCLGtCQUdBdEIsRUFBQTRCLFdBQUEsU0FBQUosR0FDQUosUUFBQUMsSUFBQSxrQkFBQUcsR0FDQXZCLEVBQUEyQixXQUFBSixHQUNBTixLQUFBWCxHQUNBb0IsUUFDQVAsUUFBQUMsSUFBQSxVQUFBckIsRUFBQVcsZ0JBQ0FYLEVBQUFzQixrQkFHQXRCLEVBQUE2QixhQUFBLFNBQUFMLEdBQ0FKLFFBQUFDLElBQUEsb0JBQUFHLEdBQ0F2QixFQUFBNEIsYUFBQUwsR0FDQU4sS0FBQVgsR0FDQW9CLFFBQ0FQLFFBQUFDLElBQUEsVUFBQXJCLEVBQUFXLGdCQUNBWCxFQUFBc0Isa0JBR0F0QixFQUFBOEIsYUFBQSxTQUFBTixHQUNBSixRQUFBQyxJQUFBLG9CQUFBRyxHQUNBdkIsRUFBQTZCLGFBQUFOLEVBQUFaLElBQ0FNLEtBQUFYLEdBQ0FvQixRQUNBUCxRQUFBQyxJQUFBLFVBQUFyQixFQUFBVyxnQkFDQVgsRUFBQXNCLHFCQzVGQWxDLElBQUEyQyxRQUFBLGlCQUFBLFFBQUEsU0FBQUMsR0FFQSxRQUFBQyxHQUFBUCxHQUdBLE1BREFOLFNBQUFDLElBQUEsV0FBQUssR0FDQUEsRUFBQVEsS0FHQSxPQUNBakIsYUFBQSxXQUVBLE1BQUFlLEdBQUFHLElBQUEsZUFDQWpCLEtBQUFlLEdBQ0FOLFNBRUFGLGdCQUFBLFNBQUFELEdBQ0EsTUFBQVEsR0FBQUcsSUFBQSxlQUFBWCxFQUFBWixJQUNBTSxLQUFBZSxHQUNBTixTQUVBQyxXQUFBLFNBQUFKLEdBQ0EsTUFBQVEsR0FBQUksS0FBQSxjQUFBWixHQUNBTixLQUFBZSxHQUNBTixTQUVBRSxhQUFBLFNBQUFMLEdBQ0EsTUFBQVEsR0FBQUssSUFBQSxlQUFBYixFQUFBWixHQUFBWSxHQUNBTixLQUFBZSxHQUNBTixTQUVBRyxhQUFBLFNBQUFOLEdBQ0EsTUFBQVEsR0FBQU0sT0FBQSxlQUFBZCxFQUFBWixJQUNBTSxLQUFBZSxHQUNBTiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgWyd1aS5yb3V0ZXInXSk7XG5cbmFwcC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICByZXF1aXJlQmFzZTogZmFsc2VcbiAgICB9KTtcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbn1dKTtcbmFwcC5jb250cm9sbGVyKCdwZW9wbGVDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgcGVvcGxlRmFjdG9yeSkge1xuXG4gICAgZnVuY3Rpb24gY291bnRQcm9wZXJ0aWVzKG9iaikge1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSArK2NvdW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVSZXN1bHRzKHJlc3VsdHMpIHtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0cykpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFtyZXN1bHRzXTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzID09PSAyMDQpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgaWQ6ICdSRUNPUkQgREVMRVRFRCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1JFQ09SRCBERUxFVEVEJyxcbiAgICAgICAgICAgICAgICBmYXZvcml0ZUNpdHk6ICdSRUNPUkQgREVMRVRFRCdcbiAgICAgICAgICAgIH1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXN1bHRzID0gcmVzdWx0cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5tYXggPSAwO1xuXG4gICAgJHNjb3BlLnBlb3BsZSA9IHBlb3BsZUZhY3RvcnkuZ2V0QWxsUGVvcGxlKCkudGhlbihmdW5jdGlvbiAocGVvcGxlKSB7XG4gICAgICAgICRzY29wZS5tYXggPSBwYXJzZUludChjb3VudFByb3BlcnRpZXMocGVvcGxlKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5tYXgpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcblxuICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHt9O1xuXG4gICAgJHNjb3BlLmdldFBlcnNvbnMgPSBmdW5jdGlvbiAocGVyc29uSW5mbykge1xuXG4gICAgICAgIGlmICghIXBlcnNvbkluZm8uaWQpIHtcbiAgICAgICAgICAgICRzY29wZS5nZXRTaW5nbGVQZXJzb24oJHNjb3BlLmN1cnJlbnRQZXJzb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmdldEFsbFBlb3BsZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5nZXRBbGxQZW9wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHZXQgYWxsIHBlb3BsZScpO1xuICAgICAgICBwZW9wbGVGYWN0b3J5LmdldEFsbFBlb3BsZSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFJlc3VsdHMgPSByZXNwb25zZTtcbiAgICAgICAgfSkuY2F0Y2goKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmdldFNpbmdsZVBlcnNvbiA9IGZ1bmN0aW9uIChwZXJzb25JbmZvKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHZXQgc2luZ2xlIFBlcnNvbicsIHBlcnNvbkluZm8pO1xuICAgICAgICBwZW9wbGVGYWN0b3J5LmdldFNpbmdsZVBlcnNvbihwZXJzb25JbmZvKS50aGVuKHNhdmVSZXN1bHRzKS5jYXRjaCgpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0cycsICRzY29wZS5jdXJyZW50UmVzdWx0cyk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS5wb3N0UGVyc29uID0gZnVuY3Rpb24gKHBlcnNvbkluZm8pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJwb3N0IG9uZSBwZXJzb25cIiwgcGVyc29uSW5mbyk7XG4gICAgICAgIHBlb3BsZUZhY3RvcnkucG9zdFBlcnNvbihwZXJzb25JbmZvKS50aGVuKHNhdmVSZXN1bHRzKS5jYXRjaCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlc3VsdHNcIiwgJHNjb3BlLmN1cnJlbnRSZXN1bHRzKTtcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZVBlcnNvbiA9IGZ1bmN0aW9uIChwZXJzb25JbmZvKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGUgb25lIHBlcnNvbicsIHBlcnNvbkluZm8pO1xuICAgICAgICBwZW9wbGVGYWN0b3J5LnVwZGF0ZVBlcnNvbihwZXJzb25JbmZvKS50aGVuKHNhdmVSZXN1bHRzKS5jYXRjaCgpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0cycsICRzY29wZS5jdXJyZW50UmVzdWx0cyk7XG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfTtcblxuICAgICRzY29wZS5kZWxldGVQZXJzb24gPSBmdW5jdGlvbiAocGVyc29uSW5mbykge1xuICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlIG9uZSBwZXJzb24nLCBwZXJzb25JbmZvKTtcbiAgICAgICAgcGVvcGxlRmFjdG9yeS5kZWxldGVQZXJzb24ocGVyc29uSW5mby5pZCkudGhlbihzYXZlUmVzdWx0cykuY2F0Y2goKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdHMnLCAkc2NvcGUuY3VycmVudFJlc3VsdHMpO1xuICAgICAgICAkc2NvcGUuY3VycmVudFBlcnNvbiA9IHt9O1xuICAgIH07XG59KTtcbmFwcC5mYWN0b3J5KCdwZW9wbGVGYWN0b3J5JywgZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRBbGxQZW9wbGU6IGZ1bmN0aW9uIGdldEFsbFBlb3BsZSgpIHtcblxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wZW9wbGUnKS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpbmdsZVBlcnNvbjogZnVuY3Rpb24gZ2V0U2luZ2xlUGVyc29uKHBlcnNvbkluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcGVvcGxlLycgKyBwZXJzb25JbmZvLmlkKS50aGVuKGdldERhdGEpLmNhdGNoKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc3RQZXJzb246IGZ1bmN0aW9uIHBvc3RQZXJzb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcGVvcGxlJywgcGVyc29uSW5mbykudGhlbihnZXREYXRhKS5jYXRjaCgpO1xuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVQZXJzb246IGZ1bmN0aW9uIHVwZGF0ZVBlcnNvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Blb3BsZS8nICsgcGVyc29uSW5mby5pZCwgcGVyc29uSW5mbykudGhlbihnZXREYXRhKS5jYXRjaCgpO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVQZXJzb246IGZ1bmN0aW9uIGRlbGV0ZVBlcnNvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3Blb3BsZS8nICsgcGVyc29uSW5mby5pZCkudGhlbihnZXREYXRhKS5jYXRjaCgpO1xuICAgICAgICB9XG4gICAgfTtcbn0pOyIsImxldCBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ3VpLnJvdXRlciddKTtcblxuYXBwLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlXG4gICAgfSk7XG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ3Blb3BsZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIHBlb3BsZUZhY3RvcnkpIHtcblxuICAgIGZ1bmN0aW9uIGNvdW50UHJvcGVydGllcyhvYmopIHtcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcblxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgICAgICAgICArK2NvdW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhdmVSZXN1bHRzKHJlc3VsdHMpIHtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0cykpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFtyZXN1bHRzXTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHRzID09PSAyMDQpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgaWQ6ICdSRUNPUkQgREVMRVRFRCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1JFQ09SRCBERUxFVEVEJyxcbiAgICAgICAgICAgICAgICBmYXZvcml0ZUNpdHk6ICdSRUNPUkQgREVMRVRFRCdcbiAgICAgICAgICAgIH1dXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5tYXggPSAwO1xuXG4gICAgJHNjb3BlLnBlb3BsZSA9IHBlb3BsZUZhY3RvcnkuZ2V0QWxsUGVvcGxlKCkudGhlbihmdW5jdGlvbihwZW9wbGUpIHtcbiAgICAgICAgJHNjb3BlLm1heCA9IHBhcnNlSW50KGNvdW50UHJvcGVydGllcyhwZW9wbGUpKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLm1heClcbiAgICB9KTtcblxuXG4gICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcblxuICAgICRzY29wZS5jdXJyZW50UmVzdWx0cyA9IHt9O1xuXG4gICAgJHNjb3BlLmdldFBlcnNvbnMgPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG5cbiAgICAgICAgaWYgKCEhcGVyc29uSW5mby5pZCkge1xuICAgICAgICAgICAgJHNjb3BlLmdldFNpbmdsZVBlcnNvbigkc2NvcGUuY3VycmVudFBlcnNvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0QWxsUGVvcGxlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZ2V0QWxsUGVvcGxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHZXQgYWxsIHBlb3BsZScpXG4gICAgICAgIHBlb3BsZUZhY3RvcnkuZ2V0QWxsUGVvcGxlKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRSZXN1bHRzID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldFNpbmdsZVBlcnNvbiA9IGZ1bmN0aW9uKHBlcnNvbkluZm8pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0dldCBzaW5nbGUgUGVyc29uJywgcGVyc29uSW5mbylcbiAgICAgICAgcGVvcGxlRmFjdG9yeS5nZXRTaW5nbGVQZXJzb24ocGVyc29uSW5mbylcbiAgICAgICAgICAgIC50aGVuKHNhdmVSZXN1bHRzKVxuICAgICAgICAgICAgLmNhdGNoKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHRzJywgJHNjb3BlLmN1cnJlbnRSZXN1bHRzKVxuICAgICAgICAkc2NvcGUuY3VycmVudFBlcnNvbiA9IHt9O1xuICAgIH1cblxuICAgICRzY29wZS5wb3N0UGVyc29uID0gZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICBjb25zb2xlLmxvZyhcInBvc3Qgb25lIHBlcnNvblwiLCBwZXJzb25JbmZvKTtcbiAgICAgICAgcGVvcGxlRmFjdG9yeS5wb3N0UGVyc29uKHBlcnNvbkluZm8pXG4gICAgICAgICAgICAudGhlbihzYXZlUmVzdWx0cylcbiAgICAgICAgICAgIC5jYXRjaCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlc3VsdHNcIiwgJHNjb3BlLmN1cnJlbnRSZXN1bHRzKVxuICAgICAgICAkc2NvcGUuY3VycmVudFBlcnNvbiA9IHt9O1xuICAgIH1cblxuICAgICRzY29wZS51cGRhdGVQZXJzb24gPSBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGUgb25lIHBlcnNvbicsIHBlcnNvbkluZm8pXG4gICAgICAgIHBlb3BsZUZhY3RvcnkudXBkYXRlUGVyc29uKHBlcnNvbkluZm8pXG4gICAgICAgICAgICAudGhlbihzYXZlUmVzdWx0cylcbiAgICAgICAgICAgIC5jYXRjaCgpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0cycsICRzY29wZS5jdXJyZW50UmVzdWx0cylcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRQZXJzb24gPSB7fTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZGVsZXRlUGVyc29uID0gZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlIG9uZSBwZXJzb24nLCBwZXJzb25JbmZvKVxuICAgICAgICBwZW9wbGVGYWN0b3J5LmRlbGV0ZVBlcnNvbihwZXJzb25JbmZvLmlkKVxuICAgICAgICAgICAgLnRoZW4oc2F2ZVJlc3VsdHMpXG4gICAgICAgICAgICAuY2F0Y2goKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdHMnLCAkc2NvcGUuY3VycmVudFJlc3VsdHMpXG4gICAgICAgICRzY29wZS5jdXJyZW50UGVyc29uID0ge307XG4gICAgfVxufSkiLCJhcHAuZmFjdG9yeSgncGVvcGxlRmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpXG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldEFsbFBlb3BsZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcGVvcGxlJylcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpbmdsZVBlcnNvbjogZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wZW9wbGUvJyArIHBlcnNvbkluZm8uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9LFxuICAgICAgICBwb3N0UGVyc29uOiBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wZW9wbGUnLCBwZXJzb25JbmZvKVxuICAgICAgICAgICAgICAgIC50aGVuKGdldERhdGEpXG4gICAgICAgICAgICAgICAgLmNhdGNoKClcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlUGVyc29uOiBmdW5jdGlvbihwZXJzb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Blb3BsZS8nICsgcGVyc29uSW5mby5pZCwgcGVyc29uSW5mbylcbiAgICAgICAgICAgICAgICAudGhlbihnZXREYXRhKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgpXG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVBlcnNvbjogZnVuY3Rpb24ocGVyc29uSW5mbykge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9wZW9wbGUvJyArIHBlcnNvbkluZm8uaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RGF0YSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKVxuICAgICAgICB9XG4gICAgfVxufSkiXX0=
